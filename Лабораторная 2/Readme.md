# Huffman Archiver

Программа для сжатия и распаковки файлов с использованием алгоритма Хаффмена.

## Оглавление
- Особенности
- Алгоритм Хаффмена
- Установка
- Использование
- Примеры
- Формат файлов
- Эффективность сжатия
- Ограничения

## Особенности

- Автоматическая оптимизация - предотвращает "отрицательное сжатие" для маленьких файлов
- Универсальность - работает с любыми типами файлов
- Подробная статистика - отображает детальную информацию о процессе сжатия
- Проверка целостности - обеспечивает корректность распаковки
- Простота использования - интуитивно понятный интерфейс командной строки

## Алгоритм Хаффмена

Алгоритм Хаффмена основан на статистическом кодировании:

1. Анализ частот - подсчет встречаемости каждого символа
2. Построение дерева - создание бинарного дерева Хаффмена
3. Генерация кодов - назначение коротких кодов частым символам
4. Кодирование - замена символов на соответствующие коды

## Установка

### Требования
- Python 3.6 или выше

### Проверка установки
```bash
python --version
```

## Использование

### Базовый синтаксис

**Сжатие файла:**
```bash
python huffman.py compress входной_файл выходной_файл.huf
```

**Распаковка файла:**
```bash
python huffman.py decompress входной_файл.huf выходной_файл
```

### Параметры командной строки

| Параметр      | Описание                       |
|---------------|--------------------------------|
| compress      | Режим сжатия файла             |
| decompress    | Режим распаковки файла         |
| входной_файл  | Путь к исходному файлу         |
| выходной_файл | Путь для сохранения результата |

## Примеры

### Сжатие текстового файла
```bash
python huffman.py compress document.txt document.huf
```

**Вывод:**
```
Сжатие файла: document.txt
Различных символов: 78
Исходный размер: 15240 байт
Сжатый размер: 8734 байт
Степень сжатия: 42.69%
Сжатый файл сохранен как: document.huf
```

### Распаковка файла
```bash
python huffman.py decompress document.huf document_restored.txt
```

**Вывод:**
```
Распаковка файла: document.huf
Файл распакован как: document_restored.txt
Размер распакованного файла: 15240 байт
```

### Работа с разными типами файлов
```bash
# Текстовые файлы
python huffman.py compress test.txt test.huf

# Исходный код
python huffman.py compress huffman.py huffman.huf

# Бинарные файлы
python huffman.py compress image.jpg image.huf
```

## Формат файлов

### Структура сжатого файла (HUFF1)

| Компонент             | Размер  | Описание                            |
|-----------------------|---------|-------------------------------------|
| Маркер                | 5 байт  | HUFF1 - идентификатор сжатого файла |
| Размер дерева         | 4 байта | Размер данных дерева кодирования    |
| Данные дерева         | N байт  | Сериализованное дерево Хаффмена     |
| Закодированные данные | Остаток | Сжатые данные с выравниванием       |

### Структура несжатого файла (HUFF0)

| Компонент       | Размер  | Описание                              |
|-----------------|---------|---------------------------------------|
| Маркер          | 5 байт  | HUFF0 - идентификатор несжатого файла |
| Исходные данные | Остаток | Данные без изменений                  |

## Эффективность сжатия

### Результаты для различных типов данных

| Тип данных         | Типичное сжатие | Примечания                 |
|--------------------|-----------------|----------------------------|
| Текст (русский)    | 45-55%          | Высокая избыточность       |
| Текст (английский) | 35-45%          | Средняя избыточность       |
| XML/JSON           | 40-70%          | Повторяющаяся структура    |
| Исходный код       | 40-50%          | Много ключевых слов        |
| Логи приложений    | 20-40%          | Регулярные паттерны        |
| Исполняемые файлы  | 10-30%          | Равномерное распределение  |
| Уже сжатые данные  | 0-10%           | JPEG, PNG, ZIP             |


## Ограничения

### Технические ограничения
- Память: Весь файл загружается в оперативную память
- Производительность: Большие файлы (>100MB) могут обрабатываться медленно
- Эффективность: Маленькие файлы могут не сжиматься из-за накладных расходов

### Рекомендации по использованию
- Используйте для файлов от 1KB до 100MB
- Лучшие результаты с текстовыми данными
- Проверяйте целостность после распаковки
- Избегайте для уже сжатых данных

## Основные классы
- HuffmanCoding - основной класс реализующий алгоритм
- HeapNode - узел дерева Хаффмена

## Методы:
- compress() - сжатие файла
- decompress() - распаковка файла
- build_tree() - построение дерева
- make_codes() - генерация кодов
